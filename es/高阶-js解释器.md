# js 解释器

time: 2019.7.10  
author: heyunjiang

【已废弃】  
相关总结在 [深入浏览器-浏览器](../browser/深入浏览器-浏览器.md) 中了

## 背景

最近遇到一个问题，我在使用 window.btoa() 方法将普通字符串转成 base64 编码时，如果字符串中有中文，则会报错，提示超出了编码的范围，随着一系列的学习与总结(写在深入js-编码规则中)，也算是了解了二进制数据、binary string、base64、unicode 字符集、编码方式、StringView、arrayBuffer 等相关知识，但是却也仅仅只是会用，了解皮毛，内心实数慌的一匹。

这篇文章，作为我写的第一篇高阶文章，作为自己准备进阶高级前端的基础知识，作为自己的底气。

这篇文章要讲的主题有：`javascript 语言本身`、`AST`、`js 解释器`

## 1 javascript 如何跑起来的

从我们在编辑器里编码 -> 编辑器保存数据到磁盘 -> 服务器读取文件并返回给客户端 -> 宿主环境读取文件解释添加到任务栈 -> 单线程读取并执行js任务

这里我们只管 js 的执行，不管 html, css, image 等其他资源的处理，也就是只管 `js 解释器` 和 `浏览器引擎`

> 浏览器引擎负责调度 js 引擎和渲染引擎任务的执行，js 解释器位于 js 引擎内部  
> 宿主环境：浏览器、nodejs、Adobe Acrobat、svg、Photoshop、Apache CouchDB、嵌入式计算机、GNODE 等

### 1.1 编辑器编码

1. 我们在编辑器里面写的字符是属于 unicode 字符集，编辑器和浏览器都采用 utf-8 编码，所以对我们写的代码能够保持一致性。
2. 编辑器将我们编写的代码，通过 utf-8 编码成二进制数据，保存在磁盘上。
3. 这些二进制数据，由 windows 或其他操作系统的文件模块统一管理。

### 1.2 js 解释器解析文件

1. 渲染引擎拿到文件后，通过浏览器引擎中转，通知 js 引擎处理，js 引擎调用 js 解析器，解释执行 js 代码

## 参考文章
