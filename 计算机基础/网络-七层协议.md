# 计算机网络七层协议

time: 2018.12.05  
update: 2018.12.06

再次学习总结七层协议，以前学了不知道有什么用，因为没有结合项目来实践。现在项目、技术中用到了，特别是现在有了 http3 ，对于 tcp/ip 协议需要再次了解  
分层，本质是从数据输入/请求发出，经过几个步骤，到达目标计算机。

## 1 七层协议主要功能介绍

从上到下依次分为：应用层、表示层、会话层、传输层、网络层、链路层、物理层

1. 应用层：应用程序与其它应用程序通信的协议。对应协议： http, smtp, ftp
2. 表示层：定义数据格式及编码
3. 会话层：控制会话的开始、中转、结束，会话表示双向消息
4. 传输层：数据流差错恢复控制、数据流复用、数据包排序。对应协议：tcp, udp, spx
5. 网络层：定义数据包传输协议，包括：地址选址、路由实现与学习、数据包切片。对应协议：ip, ipx
6. 链路层：定义数据在链路上的传输方式
7. 物理层：信号传递

## 2 tcp/ip 祥解

应用层的 http 协议适用，可以很明显通过浏览器查看，在每次浏览器发起 get, post 等请求的时候，浏览器提供了控制台界面可以直接看http请求报文格式，包括 http request header, request body，当然也有 response header, response body 等。  
http 向上是直接与应用相接，开发者可以控制协议请求头和请求体，浏览器根据请求头对数据进行不同处理。

http 向下是直接与 tcp/udp 连接(当然中间表示层的加密与会话层的消息控制跳过)，那么 tcp/udp 做了什么，报文格式如何呢？

### 2.1 tcp

向上：接收到 http 传下来的数据、目标 ip 地址、源 ip 地址。  
向下：衔接 ip ，提供数据包及目标 ip 地址  
主要功能：数据缓冲、网络连接复用、差错恢复、流量控制。  
首先有个3次握手建立一个连接。

### 2.2 ip

ip协议作为网络层协议，主要要实现以下功能  
1. 路由选址和中继
2. 激活、终止网络连接
3. 链路复用(与 http 的多路复用不同)
4. 差错检测与恢复
5. 流量控制、排序
6. 服务选择
7. 网络管理
8. 数据切片

向上：提供链路复用、差错检测等功能给 tcp 使用  
向下：使用链路层传输数据

## 参考文章

[1 网络七层协议-百度百科](https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E4%B8%83%E5%B1%82%E5%8D%8F%E8%AE%AE/6056879?fr=aladdin)